#include "ros/ros.h"
#include "gazebo_msgs/ApplyJointEffort.h"
#include <cstdlib>

//#include "daVinci/ApplyJointEffort.h"


int main(int argc, char **argv)
{
  ros::init(argc, argv, "ApplyJointEffort_Client");

  ros::NodeHandle n;
  ros::ServiceClient client = n.serviceClient<gazebo_msgs::ApplyJointEffort>("/gazebo/apply_joint_effort");

	if( client == NULL )
	{
	   ROS_ERROR("Unable to create Clinet service object");

	}
  gazebo_msgs::ApplyJointEffort srv;

  //give request parameterrs

  srv.request.joint_name = argv[1] ;
  srv.request.effort = 300.00;
  srv.request.start_time = ros::Time::now();
  srv.request.duration =  ros::Duration(15.0);;

  if (client.call(srv))
  {
    ROS_INFO("Result: %d", srv.response.success);
    //ROS_INFO("Message: %s", srv.response.status_message);
  }
  else
  {
    ROS_INFO("Result: %d and Message=%s", srv.response.success, srv.response.status_message.c_str());
    ROS_ERROR("Failed to call service ApplyJointEffort");
    return 1;
  }

  return 0;
}
