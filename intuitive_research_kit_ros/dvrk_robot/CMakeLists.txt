cmake_minimum_required(VERSION 2.8.3)
project(dvrk_robot)

## Find catkin macros and libraries
## if COMPONENTS list like find_package(catkin REQUIRED COMPONENTS xyz)
## is used, also find other catkin packages
find_package(catkin REQUIRED COMPONENTS
  cisst_msgs
  cisst_ros_bridge
  geometry_msgs
  roscpp
  std_msgs
)

set (REQUIRED_CISST_LIBRARIES
  cisstCommon
  cisstCommonXML
  cisstVector
  cisstVectorQt
  cisstOSAbstraction
  cisstMultiTask
  cisstMultiTaskQt
  cisstParameterTypes
  cisstParameterTypesQt
  cisstRobot
  cisstNumerical
  cisstQt
  )



# find cisst and make sure the required libraries have been compiled
find_package (cisst REQUIRED ${REQUIRED_CISST_LIBRARIES})
include (${CISST_USE_FILE})


catkin_package(
#  INCLUDE_DIRS include
#  LIBRARIES dvrk_robot
#  CATKIN_DEPENDS cisst_msgs cisst_ros_bridge geometry_msgs
#                 roscpp std_msgs
#  DEPENDS system_lib
)

# include_directories(include)
include_directories(
  ${catkin_INCLUDE_DIRS}
)

if (cisst_FOUND_AS_REQUIRED)

  # sawRobotIO1394 has been compiled within cisst, we should find it automatically
  cisst_find_saw_component (sawRobotIO1394 REQUIRED)
  cisst_find_saw_component (sawIntuitiveResearchKit REQUIRED)
  cisst_find_saw_component (sawControllers REQUIRED)
  cisst_find_saw_component (sawTextToSpeech REQUIRED)

  message(STATUS "sawControllers: " ${sawControllers_LIBRARY_DIR})
  message(STATUS "sawControllers_LIBRARIES: " ${sawControllers_LIBRARIES})
		message(STATUS "sawControllers_LIBRARIES: " ${sawIntuitiveResearchKit_LIBRARIES})

  include_directories (
    ${sawRobotIO1394_INCLUDE_DIR}
    ${sawIntuitiveResearchKit_INCLUDE_DIR}  
    ${sawControllers_INCLUDE_DIR}
    ${sawTextToSpeech_INCLUDE_DIR})

  link_directories (
    ${sawRobotIO1394_LIBRARY_DIR}
    ${sawIntuitiveResearchKit_LIBRARY_DIR}
    ${sawControllers_LIBRARY_DIR}
    ${sawTextToSpeech_LIBRARY_DIR})

  add_executable (dvrk_mtm_ros src/pidMTM.cpp)
  add_executable (dvrk_psm_ros src/pidPSM.cpp)
  add_executable (dvrk_full_ros src/teleopJSON.cpp)
	
  target_link_libraries (dvrk_mtm_ros
    ${sawRobotIO1394_LIBRARIES}
    ${sawIntuitiveResearchKit_LIBRARIES}
    ${sawControllers_LIBRARIES}
    ${catkin_LIBRARIES}
    )
  target_link_libraries (dvrk_psm_ros
    ${sawRobotIO1394_LIBRARIES}
    ${sawIntuitiveResearchKit_LIBRARIES}
    ${sawControllers_LIBRARIES}
    ${catkin_LIBRARIES}
    )
  target_link_libraries (dvrk_full_ros
    ${sawRobotIO1394_LIBRARIES}
    ${sawIntuitiveResearchKit_LIBRARIES}
    ${sawControllers_LIBRARIES}
 			${sawTextToSpeech_LIBRARIES}
    ${catkin_LIBRARIES}
    )
  cisst_target_link_libraries (dvrk_mtm_ros ${REQUIRED_CISST_LIBRARIES})
  cisst_target_link_libraries (dvrk_psm_ros ${REQUIRED_CISST_LIBRARIES})
		cisst_target_link_libraries (dvrk_full_ros ${REQUIRED_CISST_LIBRARIES})

endif(cisst_FOUND_AS_REQUIRED)


